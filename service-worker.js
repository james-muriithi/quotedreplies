self.addEventListener("fetch",function(e){e.respondWith(caches.open("cache").then(function(t){return t.match(e.request).then(function(n){console.log("cache request: "+e.request.url);var c=fetch(e.request).then(function(n){return console.log("fetch completed: "+e.request.url,n),n&&(console.debug("updated cached page: "+e.request.url,n),"GET"===e.request.method&&"basic"===n.type&&t.put(e.request,n.clone())),n},function(e){console.log("Error in fetch()",e),e.waitUntil(caches.open("cache").then(function(e){return e.addAll("/")}))});return n||c})}))}),self.addEventListener("install",function(e){self.skipWaiting(),console.log("Latest version installed!")});