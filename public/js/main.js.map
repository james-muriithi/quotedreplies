{"version":3,"sources":["main.js"],"names":["currentPageId","currentSelectorId","getButtons","navigator","window","addEventListener","serviceWorker","register","then","console","log","onload","forEach","page","document","getElementById","changePage","jQuery","$","children","each","index","el","on","parsedUrl","URL","location","url","searchParams","get","link","tweetId","generateLink","val","attr","parent","removeClass","history","replaceState","addClass","event","id","this","dataset","trigger","currentSelector","currentPage","pageId","pageSelector","classList","contains","remove","add","scrollTo","find","parts","match","error"],"mappings":"AACA,IAAIA,cAAgB,YAChBC,kBAAoB,OAGxB,MAAMC,WAAa,IAER,CAAC,OAAQ,UAAW,QAAS,WAIpC,kBAAmBC,WACnBC,OAAOC,iBAAiB,OAAQ,KAC5BF,UAAUG,cAAcC,SAAS,qBAC5BC,KAAK,KACFC,QAAQC,IAAI,kCAM5BN,OAAOO,OAAS,MAdL,CAAC,OAAQ,UAAW,QAAS,WAiBzBC,QAAQC,IACfC,SAASC,eAAeF,GAAMR,iBAAiB,QAASW,YAAY,KAEpEZ,OAAOa,QACPC,EAAE,eAAeC,WAAWC,KAAK,SAASC,EAAOC,GAC7CJ,EAAEI,GAAIC,GAAG,QAASP,gBAK9BZ,OAAOC,iBAAiB,mBAAoB,WACxC,GAAID,OAAOa,OAAQ,CACf,MAAMO,EAAY,IAAIC,IAAIrB,OAAOsB,UACjC,IAAIC,EAAMH,EAAUI,aAAaC,IAAI,OAKrC,GAJApB,QAAQC,IAAIiB,GAEZA,EAAMA,GAAYH,EAAUI,aAAaC,IAAI,QAEpC,CACL,MAAOC,EAAMC,GAAWC,aAAaL,GAEjCG,GAAQC,GACRb,EAAE,qBAAqBe,IAAIN,GAC3BT,EAAE,UAAUgB,KAAK,OAAQJ,GAAMK,SAASC,YAAY,YAGpDhC,OAAOiC,QAAQC,aAAa,GAAI,GAAI,mBACpCpB,EAAE,qBAAqBe,IAAI,IAC3Bf,EAAE,UAAUiB,SAASI,SAAS,gBAGlCrB,EAAE,qBAAqBe,IAAI,IAC3Bf,EAAE,UAAUiB,SAASI,SAAS,UAGlCrB,EAAE,UAAUK,GAAG,QAAS,SAASiB,GAC7BpC,OAAOiC,QAAQC,aAAa,GAAI,GAAI,mBACpCpB,EAAE,qBAAqBe,IAAI,IAC3Bf,EAAE,UAAUiB,SAASI,SAAS,eAK1C,MAAMvB,WAAa,WACfyB,GAAKC,KAAKD,GAAKC,KAAKD,GAAKC,KAAKC,QAAQC,QACtC,IAAIC,EAAkB/B,SAASC,eAAed,mBAC1C6C,EAAchC,SAASC,eAAef,eACtC+C,EAAS,QAAUN,GACnB5B,EAAOC,SAASC,eAAegC,GAC/BC,EAAelC,SAASC,eAAe0B,IAEvC5B,EAAKoC,UAAUC,SAAS,YAI5BL,EAAgBI,UAAUE,OAAO,iBACjCN,EAAgBI,UAAUG,IAAI,mBAC9BN,EAAYG,UAAUE,OAAO,UAC7BL,EAAYG,UAAUG,IAAI,YAE1BJ,EAAaC,UAAUE,OAAO,mBAC9BH,EAAaC,UAAUG,IAAI,iBAE3BvC,EAAKoC,UAAUE,OAAO,YACtBtC,EAAKoC,UAAUG,IAAI,UAGnBhD,OAAOiD,SAAS,EAAG,GAEnBpD,kBAAoBwC,GACpBzC,cAAgB+C,EAEhB7B,EAAE,eAAeC,WAAWiB,YAAY,UACxClB,EAAE,eAAeoC,uBAAuBb,QAAQF,SAAS,YAG7D,SAASP,aAAcL,GACnB,IAAI4B,EAAQ5B,EAAI6B,MAAM,4EACtB,IACI,IAAIzB,EAAUwB,EAAM,GAEpB,MAAO,4DAD+DxB,IACxDA,GAEhB,MAAO0B,GACL,MAAM,CAAC,KAAM","file":"main.js","sourcesContent":["//Global letiable for starting page\r\nlet currentPageId = \"page-home\";\r\nlet currentSelectorId = \"home\";\r\n\r\n//Function for getting the button ids\r\nconst getButtons = ()=> {\r\n    //List of button ids\r\n    return [\"home\", \"popular\", \"about\", \"account\"];\r\n     \r\n}\r\n// service worker\r\nif ('serviceWorker' in navigator) {\r\n    window.addEventListener('load', () => {\r\n        navigator.serviceWorker.register('service-worker.js')\r\n            .then(()=> {\r\n                console.log(\"Service Worker Registered,\");\r\n            });\r\n    });\r\n}\r\n\r\n//Make sure the window is loaded before we add listeners\r\nwindow.onload = ()=> {\r\n    let pageIdList = getButtons();\r\n    //Add an event listener to each button\r\n    pageIdList.forEach(page => {\r\n        document.getElementById(page).addEventListener(\"click\", changePage, false);\r\n    });\r\n    if (window.jQuery) {\r\n        $('.navbar-nav').children().each(function(index, el) {\r\n            $(el).on('click', changePage);\r\n        });\r\n    }\r\n}\r\n\r\nwindow.addEventListener('DOMContentLoaded', function(){\r\n    if (window.jQuery) {\r\n        const parsedUrl = new URL(window.location)\r\n        let url = parsedUrl.searchParams.get('url');\r\n        console.log(url);\r\n\r\n        url = url ? url : parsedUrl.searchParams.get('text');\r\n\r\n        if (url) {\r\n            const [link, tweetId] = generateLink(url);\r\n\r\n            if (link && tweetId) {\r\n                $('input[name=\"url\"]').val(url)\r\n                $('a.link').attr('href', link).parent().removeClass('d-none')\r\n                // $('.search-svg svg').addClass('d-none');\r\n            } else {\r\n                window.history.replaceState({}, '', '/quotedreplies/')\r\n                $('input[name=\"url\"]').val('')\r\n                $('a.link').parent().addClass('d-none')\r\n            }\r\n        } else {\r\n            $('input[name=\"url\"]').val('')\r\n            $('a.link').parent().addClass('d-none')\r\n        }\r\n\r\n        $('a.link').on('click', function(event) {\r\n            window.history.replaceState({}, '', '/quotedreplies/')\r\n            $('input[name=\"url\"]').val('')\r\n            $('a.link').parent().addClass('d-none')\r\n        });\r\n    }\r\n})\r\n\r\nconst changePage = function() {\r\n    id = this.id ? this.id : this.dataset.trigger\r\n    let currentSelector = document.getElementById(currentSelectorId);\r\n    let currentPage = document.getElementById(currentPageId);\r\n    let pageId = \"page-\" + id;\r\n    let page = document.getElementById(pageId);\r\n    let pageSelector = document.getElementById(id);\r\n\r\n    if (page.classList.contains(\"active\")) {\r\n        return;\r\n    }\r\n\r\n    currentSelector.classList.remove(\"button-active\");\r\n    currentSelector.classList.add(\"button-inactive\");\r\n    currentPage.classList.remove(\"active\");\r\n    currentPage.classList.add(\"inactive\");\r\n\r\n    pageSelector.classList.remove(\"button-inactive\");\r\n    pageSelector.classList.add(\"button-active\");\r\n\r\n    page.classList.remove(\"inactive\");\r\n    page.classList.add(\"active\");\r\n\r\n    //Need to reset the scroll\r\n    window.scrollTo(0, 0);\r\n\r\n    currentSelectorId = id;\r\n    currentPageId = pageId;\r\n\r\n    $('.navbar-nav').children().removeClass('active')\r\n    $('.navbar-nav').find(`[data-trigger='${id}']`).addClass('active');\r\n}\r\n\r\nfunction generateLink (url) {\r\n    let parts = url.match(/(^|[^'\"])(https?:\\/\\/twitter\\.com\\/(?:#!\\/)?(\\w+)\\/status(?:es)?\\/(\\d+))/);\r\n    try {\r\n        let tweetId = parts[4]\r\n        let link = `https://twitter.com/search?q=-from:quoted_replies%20url:${tweetId}`\r\n        return [link, tweetId];\r\n\r\n    } catch (error) {\r\n        return[null, null];\r\n    }\r\n}\r\n\r\n// window.twttr = (function (d, s, id) {\r\n//     var t, js, fjs = d.getElementsByTagName(s)[0];\r\n//     if (d.getElementById(id)) return;\r\n//     js = d.createElement(s);\r\n//     js.id = id;\r\n//     js.src = \"https://platform.twitter.com/widgets.js\";\r\n//     fjs.parentNode.insertBefore(js, fjs);\r\n//     return window.twttr || (t = {\r\n//         _e: [],\r\n//         ready: function (f) {\r\n//             t._e.push(f)\r\n//         }\r\n//     });\r\n// }(document, \"script\", \"twitter-wjs\"));"]}